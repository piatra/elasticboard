<!DOCTYPE html>
<html>
<head>
    <title>Elasticboard</title>
    <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/foundation.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <meta charset="UTF-8">
</head>
<body>

<div class="row full-width" id="topbar">
    <div class="small-6 columns">
        <h1>Elasticboard</h1>
    </div>
    <div class="small-6 columns text-right">
        <span id="repo-select-trigger">
            <h1 class="inline" id="user-repo"></h1>
            <img class="cog" src="/imgs/cog.svg">
            <div class="repo-select hidden">
                <ul></ul>
            </div>
        </span>
    </div>
</div>

<div class="row full-width text-right">
    <div class="small-0 large-12 columns">
        <p id="open-issues" class="text-small inline text-centered"><span id="open-issues-count" class="issue-count">-</span> <br> open issues</p>
        <p id="open-pulls" class="text-small inline text-centered"><span id="open-pulls-count" class="issue-count">-</span> <br> open pull requests</p>
    </div>
</div>

<div class="container row full-width">
    <div class="small-0 large-2 columns" id="side-menu">
        <ul class="menu text-center">
            <li data-tab="tab-1">Timeline</li>
            <li data-tab="tab-2" data-function="drawGraphs">Graphs</li>
            <li data-tab="tab-3" data-function="drawInsights">Insights</li>
            <li data-tab="tab-4" data-function="loadKibana">Kibana</li>
            <li data-tab="github">
                <iframe src="http://ghbtns.com/github-btn.html?user=uberVU&repo=elasticboard&type=watch&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="79" height="20"></iframe>
            </li>
        </ul>
    </div>

    <div class="small-12 large-10 columns" id="tab-container">
        <div class="tab" id="tab-1">
            <div id="timeline" class="large-centered">
                <div class="timeline-item loading" id="timeline-loading">Loading more events</div>
            </div>
        </div>

        <div class="tab hide" id="tab-2">
            <div class="small-11 columns small-centered">
                <div class="graph" id="most-active-people"></div>
                <div class="graph" id="total-events-monthly"></div>
                <div class="graph" id="most-active-issues"></div>
                <!--<div class="graph" id="open-issues"></div>-->
                <!--<div class="graph" id="issues-without-comments"></div>-->
                <!--<div class="graph">-->
                    <!--<h3 class="text-center">Assigned issues</h3>-->
                    <!--<p><input type="text" placeholder="GitHub username" class="js-handler--github-username"></p>-->
                    <!--<div class="template-user-issues"></div>-->
                <!--</div>-->
            </div>
        </div>

        <div class="tab hide" id="tab-3">
            <div class="graph-like" id="untouched-issues"></div>
            <div class="graph-like" id="inactive-issues"></div>
            <div class="graph" id="issues-activity"></div>
            <div class="graph" id="avg-issue-time"></div>
            <div class="graph graph-like">
                <div class="text-center">
                    <p class="graph-title">Issues Involvement Graph</p>
                    <p class="graph-subtitle">Over the current month</p>
                </div>
                <div id="issues-involvement-graph-container"></div>
            </div>
        </div>

        <div class="tab hide" id="tab-4">
            <iframe id="kibana-iframe" src="" frameborder="0"></iframe>
        </div>
    </div>

</div>


<script id="user-issues" type="text/x-handlebars-template">
    <p>All issues assigned to {{user}}</p>
    <ul>{{list}}</ul>
</script>

<script id="timeline-item-template" type="text/x-handlebars-template">
    <div class="timeline-item row">
        <div class="small-2 columns">
          <img src="{{ avatar }}" class="timeline-item--avatar">
          <p class="timeline-item--username">{{ username }}</p>
        </div>
        <div class="small-8 columns">
            {{#if title}}
            <p class="timeline-item--title">
             #{{ number }} {{ title }}
            </p>
            <p>
              <span class="badge badge--gray">assigned to {{ assignee }}</span>
              <span class="badge badge--gray">opened {{ issue_age }} ago</span>
            </p>
            {{/if}}
            {{#if comment }}
            <p class="timeline-item--comment">
              {{ comment }}
            </p>
            <p class="timeline-item--read-more">
              <a href="{{ link }}">Read more</a>
            </p>
            {{else}}
            <p>{{ username }} {{ action }} {{{ object }}}
                {{#if commits}}
                  {{#eachCommit commits }}
                    <p class="timeline-item--comment">
                        <a href="{{{ commitUrl }}}">{{{ sha }}}</a>
                          {{{ message }}}
                        </a>
                    </p>
                  {{/eachCommit}}
                  <p class="timeline-item--read-more">
                    <a href="https://github.com/{{ url }}/compare/{{ diffTree }}">View comparasion for commits</a>
                  </p>
                {{/if}}
            </p>
            {{/if}}
        </div>
        <div class="small-2 columns text-right">
            <p class="timestamp muted">{{ timestamp }}</p>
        </div>
    </div>
</script>

<script id="timeline-author-template" type="text/x-handlebars-template">
        <span class="timeline-author">
            <img src="{{ avatarURL }}"/>
            <a href="{{ githubURL }}">{{ login }}</a>
        </span>
</script>

<script id="issues-list-template" type="text/x-handlebars-template">
    <div class="text-center">
        <p>{{ title }}</p>
    </div>
    <ul class="grey-text">
        {{#each issues}}
        <li>
            <a href="{{{ html_url }}}">#{{ number }}</a>
            <span class="muted">- {{ title }}</span>
        </li>
        {{/each}}
    </ul>
</script>

<script src="js/jquery.js"></script>
<script src="js/highcharts.js"></script>
<script src="js/highcharts-gray-theme.js"></script>
<script src="js/handlebars-v1.1.2.js"></script>
<script src="js/moment.min.js"></script>
<script src="js/d3.js"></script>
<script src="js/timeline.js"></script>
<script src="js/graphs.js"></script>
<script src="js/insights.js"></script>
<script src="js/tabs.js"></script>
<script src="js/app.js"></script>

</body>
</html>
